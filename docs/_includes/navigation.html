<style type="text/css">
  nav {
    display: block;
    margin: auto;
    border-top: 1px solid rgba(204, 214, 221, 0.5);
    border-bottom: 1px solid rgba(204, 214, 221, 0.5);
    background-color: #FFFFFF;
    width: 100%;
    z-index: 1;
    top: 0px;
  }

  nav.fixed {
    position: fixed;
  }

  nav .container {
    max-width: 1312px;
    display: grid;
    position: relative;
    margin: auto;
    padding: 0px 18px;
    height: 62px;
    overflow: hidden;
    grid-auto-columns: auto;
    grid-auto-flow: column;
    grid-template-columns: repeat(auto-fill, minmax(12%, 12%));
  }

  nav .container a {
    display: table;
    font-family: 'Haas Grot Text R', sans-serif;
    font-size: 12px;
    height: 100%;
    margin: 0px 30px 0px 0px;
    text-align: center;
    color: #141E27;
  }

  nav .container a:first-child {
    /*text-align: left;*/
  }

  nav .container a:hover {
    color: #00D395;
    text-decoration: none;
  }

  nav .container a span.active {
    color: #00D395;
    border-bottom: #00D395 solid 2px;
  }

  nav .container a span {
    height: 100%;
    display: table-cell;
    vertical-align: middle;
  }

  @media screen and (max-width: 1312px) {
    nav .container {
      max-width: 1230px;
    }
  }

  nav .hamburger-nav a {
    height: 40px;
  }
</style>

<nav id="nav" class="desktop-only">
  <div class="container">
    <!-- Set nav_data in _config.yml -->
    {% for link in site.nav_data %}
    {% assign page_name = link[0] %}
    {% assign relative_path = link[1] %}
      <a href="{{ relative_path }}">
        {% if page.dir == relative_path %}
        <span class="active">{{ page_name }}</span>
        {% else %}
        <span>{{ page_name }}</span>
        {% endif %}
      </a>
    {% endfor %}
  </div>
</nav>

<script type="text/javascript">
  // Tab order is determined by the array order in _config.yml

  window.addEventListener('DOMContentLoaded', () => {
    const docsContent = document.getElementById('docs-content');
    const header = document.getElementById('header');
    const nav = document.getElementById('nav');
    const sidebar = document.getElementById('sidebar');
    const markdownContent = document.getElementById('markdown-content');
    const fixed = 'fixed';
    const overflowScrollX = 'scroll-x';
    let isSidebarScrollable = false;

    document.addEventListener('scroll', function(e) {
      const isFixed = nav.classList.contains(fixed);
      if (window.scrollY >= nav.clientHeight && !isFixed) {
        nav.classList.add(fixed);
        sidebar.classList.add(fixed);
        markdownContent.style.marginTop = nav.clientHeight + 'px';
      } else if (window.scrollY < nav.clientHeight && isFixed) {
        nav.classList.remove(fixed);
        sidebar.classList.remove(fixed);
        markdownContent.style.marginTop = '0px';
      }

      // allow the side nav to be scrollable
      // but only when the user scrolls to the very bottom of the page
      const atBottom = markdownContent.clientHeight - window.scrollY - (docsContent.clientHeight - nav.clientHeight - header.clientHeight) === 0;
      if (atBottom) {
        isSidebarScrollable = true;
        sidebar.classList.add(overflowScrollX);
      } else if (isSidebarScrollable) {
        isSidebarScrollable = false;
        sidebar.classList.remove(overflowScrollX);
      }
    });
  });
</script>
